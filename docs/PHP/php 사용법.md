# PHP 용어

## Container 와 image 란?
Container 란 다양한 어플리케이션을 설치해 하나의 서버처럼 사용할 수 있는 패키지이다. 
사용하는 이유는 가상환경과 비슷하게 우리가 짜놓은 코드가 os, 툴의 버전에 따라서 다른 곳에선 안될수도 있기 때문에 이런 문제점을 해결하기 위해서 컨테이너를 사용하여 환경을 구축한 후에 배포한다. 
그래서 코드에서 새로운 Container를 만드는 것은 하나의 종속성을 가지고 있는 서버를 만드는 것과 같다. 하나의 큰 container 에 변수, 함수등을 set을 통해 넣고 get 을 통해 가지고 오는 형식으로 코드가 진행된다.  

참고자료 - https://kk-7790.tistory.com/135
참고자료 - https://psr.kkame.net/accepted/psr-4-autoloader 
참고자료 - https://www.nextree.co.kr/p11247/

image 란 서비스 운영에 필요한 서버 프로그램, 소스코드 및 라이브러리 등의 파일들을 묶는 형ㅇ태를 Docker Image 라고 한다. 특정 프로세스를 실행하기 위한 모든 파일을 가지고 있는 형태가 Image 이다. 

참고자료 - https://velog.io/@ragnarok_code/%EB%8F%84%EC%BB%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88Container%EC%99%80-%EC%9D%B4%EB%AF%B8%EC%A7%80Image%EB%9E%80



## 바인딩 이란
컨테이너에 클래스 바인딩 하기
라라벨 컨테이너에 클래스를 바인딩 한다는 것은 본질적으로 컨테이너에게 '인터페이스의 인스턴스를 요구하면 이 파라미터를 가지고 의존성을 해결하라' 하는 이야기 하는 것이다.

## Routes 라우터란

어플리케이션의 url을 관장하는 역할(Django의 urls.py). 어플리케이션의 구조를 아래와 같이 좀 더 구체화시킴

Views: Template의 역할. 브라우저에 보여지는 부분
Controllers: router에 따라 연결된 controller를 호출하며 각 controller는 정해진 로직에 따라 views와 연결.
Core: Database, boostrap, 추가적인 클래스 정의

## abstract class

개요 : 추상클래스는 실체클래스의 공통적인 부분을 추출해서 선언한 클래스이며 실체성이 없고 구체적이지 않기 때문에 객체를 생성할 수 없다. 그러므로 실체클래스와의 상속관계를 통해 사용할 수 있다.[2] 클래스를 설계도라고 했다면 추상클래스는 미완성 설계도라고 할 수 있다. 클래스가 미완성이라는 것은 미완성 메소드를 포함하고 있다는 의미로 온전한 객체를 생성할 수 없다.

목적 : 추상클래스의 목적은 공통적인 기능을 하는 객체들의 추상화로 객체를 생성하는 것이 아닌 상속을 위한 슈퍼 클래스로 활용하는 것이다.[4] 추상클래스는 추상메소드를 통해 추상클래스를 상속받는 서브 클래스가 구현할 메소드의 원형을 알려주는 인터페이스의 역할을 하고 서브 클래스의 다형성을 실현한다.

소스 수정시 다른 소스의 영향도를 적게 가져가면서 변화에는 유연하게 만들기 위해 추상클래스를 사용한다. 규격에 맞게 소스가 구현되어 있기 때문에 해당 규격에 대한 구현부만 수정하면 손 쉽게 수정이 가능하기 때문이다.

참고자료 - http://wiki.hash.kr/index.php/%EC%B6%94%EC%83%81%ED%81%B4%EB%9E%98%EC%8A%A4
        - http://alecture.blogspot.com/2011/05/abstract-class-interface.html

## 정적 메소드

정적 메소드란 클래스 내에서 static 을 사용하여 함수나 변수를 만드는 것이다 정적 메소드는 인스턴스를 따라 만들지 않더라도 함수나 변수를 사용할 수 있다. 그래서 메모리적으로 효율적이다. 

1. 클래스의 인스턴스 없이 호출이 가능하며, 인스턴스에서는 호출 할 수 없다. 
2. 유틸리티 함수를 만드는데 유용하게 사용된다.
장점 : 클래스를 인스턴스로 따로 변수로 선언하고 만들 필요없이 바로 함수 사용이 가능하다.
like 판다스의 함수들 처럼.. 

https://mygumi.tistory.com/253



# PHP 명령어

### require_once
require_onne : 외부의 클래스 파일 불러오기

### namespace
이름이 겹쳐서 문제가 발생할 수 있기 때문에 이를 방지하기 위해 namespace 를 사용한다. 

### use
import 와 같은 개념이다. 파이썬의 import는 참조할 라이브러리를 어디서 사용할 것인지 설정해주는 것이다.

jupyter 와 같이 Composer에 다양한 라이브러리가 있어서 use를 사용해서 import를 사용한다.

사용하는 이유는 이제 프로젝트를 하다보면 사용할 클래스의 이름이나 겹칠 수 있다. 이름이 겹쳤을 때 어떤 경로의 클래스를 사용할 것인지 지정해주는 것이다. namespace와 같이 사용한다. 

# composer 외부 클래스 설명

## DI

그니까 원래는 클래스를 사용할 때 아래와 같은 순서로 클래스를 실행한다.
    애플리케이션에는 Foo(예: 컨트롤러)가 필요하므로:
    애플리케이션이 Foo를 생성합니다.
    애플리케이션 호출 Foo
        Foo는 Bar(예: 서비스)가 필요하므로:
        Foo는 Bar를 생성합니다.
        푸 콜 바
            Bar에는 Bim(서비스, 저장소 등)이 필요하므로:
            막대가 Bim을 생성합니다.
            바는 무언가를 한다

근데 DI/container 를 활용해서 종속성을 주입한다면 
    응용 프로그램에는 Bim이 필요한 Bar가 필요한 Foo가 필요합니다.
    애플리케이션이 Bim을 생성합니다.
    응용 프로그램이 Bar를 생성하고 Bim 제공
    응용 프로그램은 Foo를 생성하고 Bar를 제공합니다.
    애플리케이션 호출 Foo
        푸 콜 바
            바는 무언가를 한다

아래와 같은 코드로 실행이 된다. C 서비스를 사용하기 위해서 A,B 클래스가 필요하다고 했을 때 원래는 A,B 를 불러온 다음에 C를 실행했지만 종속성을 주입하여 C를 사용하면 A,B를 자동으로 생성해준다. 그게 DI/Container 클래스가 해주는 역할이다. 



참고자료 - https://php-di.org/doc/getting-started.html

## Slim

$container = $this->getContainer() : 컨테이너 인스턴스를 slim 생성자에 주입한다. 한마디로 컨테이너를 인스턴스화 한다. 

ServerRequestInterface , RequestHandlerInterface : 웹인 HTTP 에서 요청을 보낼 때 PSR-7 개체의 형태로 요청을 보낸다. 그런 서버에서 온 PSR-7 객체를 저장할 때 사용한다. 여기서 서버에서 오는 요청 중 request 와 handler 를 저장할 때 사용한다. 
참고자료 - https://www.slimframework.com/docs/v3/objects/request.html

getHeader() : 모든 HTTP 요청 헤더를 연관 배열로 가져온다. 결과 연관 배열의 key는 헤더 이름이며 해당 value는 해당 헤더 이름에 대한 숫자 배열이다.
그리고 getHeader($name) 의 형태로 사용된다면 지정된 헤더에 대해서 모든 값을 쉽표로 구분된 문자열로 가져온다. 

withAttribute() : 요청 객체에 정보를 추가 함수

middleware 설명: https://oops4u.tistory.com/2144

참고자료 - https://oops4u.tistory.com/2157

# 데이터 베이스 Mysql 



# 내장 함수

## array 내장 함수

### array_push
array 에 아이템을 추가해주는 함수 / 파이썬의 append()

### array_map
array 에 함수를 적용한 후에 배열로 반환하는 함수 / 파이썬의 apply()

## 이외 내장함수

issert : 변수가 존재하는지 확인하는 내장 함수 

assert : 예외 처리에 사용하는 함수

assert($$this->_container->has($name), "name had not set"); 

같은 형태로 사용 - >현재 클래스에 container 에 has($name)에 갔을 때 오류가 발생한다면 뒤의 "name ..." 문장을 출력

uniqid() : 유니크한 ID를 생성하는 PHP 함수 --> 사용자 장보에 대한 암호를 저장하거나 유니크한 키 값이 필요할 때 아래의 uniqid() 함수를 사용한다.

isWritable() : 현재 DirectoryIterator 항목이 쓰기 가능한지 여부를 결정합니다. 파일의 디렉토리가 있는지 없는지 확인

getBody() : HTML 의 메시지의 body 부분을 가져온다.

strval() : 변수를 문자열로 반환한다.

implode() : implode( glue, pieces ) 의 형식으로 입력받는다. 
$glue = array['one','two','three']를 입력받고 pieces 에 '/'를 입력받으면 최종 return 값이 'one/two/three' 의 형식으로 하나의 배열로 붙여준 후에 출력된다.

sprintf() : 파이썬의 format 함수와 유사하다. 

json_decode : Json 형식을 php object 나 array 로 변환 
json_encode : php object 나 array를 json 형식으로 반환

# 클래스 선언하기

## class내의 멤버 변수 설정
public     클래스내, 클래스외의 어디에서라도 액세스 가능
private    같은 클래스안에서만 액세스 가능
protected  같은 클래스 및 **자식클래스**에서 액세스 가능 

## 기본 메소드
1. __construct() : 생성자. 클래스 생성시 자동 호출
2. __destruct() : 소멸자. 파라미터를 갖지 못한다. 클래스가 소멸될 때 자동 호출
3. __get() : 변수의 값을 가져올 때 자동 호출되는 메소드
4. __set() : 변수의 값을 조작할 때 자동 호출되는 메소드


# 변수 선언

## trait
클래스를 상속받을 때 한번에 하나의 클래스를 여러개의 클래스에서 상속받을 수 없다.
이때 생기는 문제는 여러가지 기능을 가진 하나의 클래스를 여러 클래스에서 사용해야될 경우 문제가 발생하기 때문에 이를 해결하기 위해서 trait 로 만들어서 여러 클래스에서 사용한다. 이때 사용할때는 use를 사용한다.
그래서 여기 Model trait는 주로 기능을 담는 클래스이다. 

## define 
define(string $constant_name, mixed $value, bool $case_insensitive = false): bool
    parameter
    constant_name : constant 의 이름
    dirname : 현재 폴더의 파일명을 제외한 경로


## const 
const 상수명 = 상수값 / 상수를 선언


## static
변수를 정적으로 선언한다는 것을 의미가 한다. 
총 3가지 정적 변수 선언, 정적 메서드, 정적 바인딩이 있다.
정적으로 선언한다는 것은 이제 원래 변수는 사용한 후에 메모리에서 변수가 삭제되서 초기화되지만 static을 사용하면 변수가 유지된다. 
변수는 함수 안에서만 유지된다. 그 함수를 또 실행할 때 저장된 변수가 출력되는 것이다. 
참고자료 https://blogchannel.tistory.com/94


## callable
특정 상황이 되면 호출이 가능해지는 객체가 callable 이다.
원래 php에는 타입힌트를 제공하지 않지만 callable 은 제공한다.
https://wan2.land/posts/2015/05/02/php-something-4-callable/


## -> , => , :: 차이
-> : 객체 범위 내에서 객체에 접근하기 위해서 사용하는 오퍼레이터 (객체내의 함수를 불러올 때 사용한다.)
=> : 배열의 키,값 을 할당할 떄 사용하는 오퍼레이터 (배열에서 사용한다.)
:: : 정적으로 클래스에서 값을 가져올 때 사용한다. 인스턴스로 선언하지 않고 바로 클래스의 함수나 변수를 불러올 때 사용한다. 
-> 를 사용할 때는 객체로 만든 후에 -> 를 사용하고 객체로 만들지 않고 사용할 때는 :: 로 사용한다.
추가적으로 부모 클래스가 있을 경우 :: 를 사용해서 부모 클래스의 함수를 불러올 수 있다.


## 함수 인자 참조, 비참조
함수를 선언할 때 인자를 나타날때 (array &$appendings, array $puts) 과 같이 나타내면
'&' 의 차이가 발생한다. 여기서 & 는 참조 전달이라고 하는데 &를 사용했을 때 함수내에서 appending array 에 변화가 생기면 함수 밖까지 전달이 된다. 

--------------------
# 반복문

## foreach
배열의 원소나 객체의 프로퍼티 수만큼 반복하여 동작 하나하나 처리하는 것보다 더 깔끔하게 가능
파이썬의 for i in 배열: 느낌인데 이제 배열의 key와 value 를 같이 전달 가능
foreach($(반복할 배열) as (key)=>(value)) {}
그러면 이제 배열의 key 와 value 에 자동으로 접근한다.

----------------

# 연산자

## '===' 와 '==' 의 차이점
==는 대충이 되고 ===는 엄격하게 비교한다. 글자 하나라도 틀리면 거짓으로 한다.
=== 은 두 값이 같고, 형식도 같은지 확인하기
== 은 두 값이 같은지 확인하기
-----------------

# 웹 다루기 - HTTP 메소드
브라우저에서 서버에 무언가를 요청할 때가 있는데 이때  요청시 전달한 파라미터를 읽어서 처리하는 메소드 모음이다. 웹사이트와 파라미터를 전달하고 받을 때 사용한다. 
참고사이트 - https://wikidocs.net/116891

## GET
GET 은 데이터를 읽어올 때 주로 사용한다. GET 요청은 주소창에 파라미터가 담겨있다. 
GET 파라미터는 ? 로 시작하고 각 항목은 키:값 형태로 구성하며 항목간의 연결에는 & 로 표시

## POST
POST 요청은 파라미터가 http 본문(body)에 실려서 서버로 전송되기 때문에 주소창에는 변화가 없다.

## header
header("Location: /target_url") 와 같은 형식으로 코드가 실행될 경우 url을 다른 target_url로 넘긴다.

## 세션
접속 클라이언트별 사용자의 정보이다. 사용자의 정보 느낌, IP 주소 같은 고유 정보를 저장한다. 

## html 이스케이프
htmlspecialchars 를 사용하여 사용자가 소스를 보지 못하도록 한다. htmlspecialchars 사용하면 이제 특수문자로 encoding 되어 소스를 볼 수 없다.

## 데이터 직렬화, 역직렬화
데이터를 직렬화해서 데이터베이스에 넣거나 파일에 저장하거나 하는 용도

## Factory
프로젝트 디자인 패턴이다. 원하는 클래스 객체를 생성할때 그 클래스를 생성하는 것이 아니라 이제 factory를 따로 만들어서 생성을 한다. 이럴 경우 객체 하나를 만들 때 무언가 수정해야한다면 클래스를 수정하는 것이 아니라 factory 클래스만 수정하면 되기 때문에 이를 사용한다.